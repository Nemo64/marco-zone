---
layout: base
amp_tags:
    amp-timeago: https://cdn.ampproject.org/v0/amp-timeago-0.1.js
    amp-iframe: https://cdn.ampproject.org/v0/amp-iframe-0.1.js
styles: >

    amp-timeago {
        text-align: left;
        text-overflow: ellipsis;
        white-space: nowrap;
        vertical-align: top;
    }

    .post__subheadline {
        font-size: .8em;
        color: indianred;
        margin-top: 0;
        margin-bottom: 0;
    }

    .post__content > amp-img,
    .post__content > noscript > img {
        margin-top: 1em;
        margin-bottom: 1em;
    }

    .post__comments {
        margin-top: 4rem;
        margin-bottom: 4rem;
        max-width: 42rem;
    }

    .author__meta {
        display: table;
        margin-top: 1rem;
        margin-bottom: 1rem;
    }

    .author__image,
    .author__body {
        display: table-cell;
        vertical-align: middle;
    }

    .author__image {
        width: 160px;
    }

    .post__author {
        margin-top: 4rem;
        margin-bottom: 4rem;
    }

    .author__image {
        width: 80px;
        float: left;
        padding-right: .5rem;
    }

    .author__image > amp-img,
    .author__image > noscript > img {
        border-radius: 50%;
    }

    .author__name {
        margin: 0;
        padding: 0;
    }

    .author__twitter {
        display: block;
    }

    @media print {
        .post__comments {
            display: none;
        }
    }
---

<main class="post" vocab="http://schema.org/" typeof="BlogPosting" resource="{{ page.url | prepend: site.baseurl | prepend: site.url }}">
    <meta property="mainEntityOfPage" content="{{ page.url | prepend: site.baseurl | prepend: site.url }}">

    <header class="page-content">
        <h1 class="post__headline" property="headline">
            {{ page.title | strip | escape }}
        </h1>

        <p class="post__subheadline">
            von {{ site.authors[page.author].name | strip | escape }} ver√∂ffentlicht
            <amp-timeago datetime="{{ page.date | date_to_xmlschema }}" cutoff="31536000" width="160" height="16">
                am {{ page.date | date_to_long_string }}
            </amp-timeago>
            {% if page.lastmod %}<br>
                zuletzt bearbeitet
                <amp-timeago datetime="{{ page.lastmod | date_to_xmlschema }}" cutoff="31536000" width="100" height="16">
                    am {{ page.lastmod | date_to_long_string }}
                </amp-timeago>
            {% endif %}
        </p>

        <p class="post__lead lead" property="description">
            {{ page.description | strip | escape }}
        </p>
    </header>

    <div class="post__content page-content" property="articleBody">
        {{ content | replace: 'href="http', 'target="_blank" rel="noopener" href="http' }}
    </div>

    <aside class="post__author page-content" id="author">
        <figure>
            <h2>Author:</h2>
            <div class="author" property="author" typeof="Person">
                <div class="author__meta">
                    <div class="author__image">
                        {% responsive_image path: "assets/person/marco-desaturate.jpg" property: "image" sizes="10rem" %}
                    </div>
                    <div class="author__body">
                        <h3 class="author__name" property="name">Marco Pfeiffer</h3>
                        <a class="author__twitter" href="https://twitter.com/TheTrueNemo">@TheTrueNemo</a>
                    </div>
                </div>
            </div>
        </figure>
    </aside>

    <aside hidden typeof="Organization" property="publisher">
        <meta property="name" content="{{ site.title }}">
        <div property="logo" typeof="ImageObject">
            <meta property="url" content="{{ '/assets/marco-zone-text.png' | prepend: site.baseurl | prepend: site.url }}">
            <meta property="width" content="378">
            <meta property="height" content="60">
        </div>
    </aside>

    <aside class="post__comments page-content" id="comments">
        {% if false %}
            <iframe height="320"
                    sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
                    style="width: 100%"
                    resizable
                    frameborder="0"
                    src="/comments?title={{ page.title | url_encode }}&url={{  page.url | url_encode }}"></iframe>
        {% else %}
            <amp-iframe height="320"
                        sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
                        resizable
                        frameborder="0"
                        src="{{ site.url2 }}/comments?title={{ page.title | url_encode }}&url={{  page.url | url_encode }}">
                <div overflow tabindex="0" role="button" aria-label="Mehr lesen!">Mehr lesen!</div>
            </amp-iframe>
        {% endif %}
    </aside>

</main>

